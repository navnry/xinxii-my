(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/login"],{"26c1":function(n,t,e){"use strict";e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return u})),e.d(t,"a",(function(){return i}));var i={uNavbar:function(){return e.e("uview-ui/components/u-navbar/u-navbar").then(e.bind(null,"33f0"))},uImage:function(){return e.e("uview-ui/components/u-image/u-image").then(e.bind(null,"a31d"))},uInput:function(){return Promise.all([e.e("common/vendor"),e.e("uview-ui/components/u-input/u-input")]).then(e.bind(null,"0773"))},uVerificationCode:function(){return e.e("uview-ui/components/u-verification-code/u-verification-code").then(e.bind(null,"5c20"))},uButton:function(){return e.e("uview-ui/components/u-button/u-button").then(e.bind(null,"f983"))},uDivider:function(){return e.e("uview-ui/components/u-divider/u-divider").then(e.bind(null,"10a6"))},uIcon:function(){return e.e("uview-ui/components/u-icon/u-icon").then(e.bind(null,"47ce"))}},o=function(){var n=this,t=n.$createElement;n._self._c},u=[]},"4d95":function(n,t,e){"use strict";var i=e("51f9"),o=e.n(i);o.a},"51f9":function(n,t,e){},"7f6e":function(n,t,e){"use strict";e.r(t);var i=e("26c1"),o=e("f53e");for(var u in o)"default"!==u&&function(n){e.d(t,n,(function(){return o[n]}))}(u);e("4d95");var s,r=e("f0c5"),a=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"595ab8ad",null,!1,i["a"],s);t["default"]=a.exports},dd07:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=e("2f62");e("4606"),o(e("d184"));function o(n){return n&&n.__esModule?n:{default:n}}function u(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,i)}return e}function s(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?u(Object(e),!0).forEach((function(t){r(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):u(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function r(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var a={data:function(){return{isCodeLogin:!0,appId:"",loginParams:{username:"",password:""},userinfo:{openId:"",unionId:"",logo:"",realname:"",type:3},type:"",isMy:!1,tips:"",logining:!1}},computed:(0,i.mapState)(["isLogin","configInfo"]),onLoad:function(n){n&&1==n.type&&(this.isMy=!0)},methods:s(s({},(0,i.mapMutations)(["LOGIN","SET_TEMP_USERINFO"])),{},{codeChange:function(n){this.tips=n},switchType:function(){this.loginParams.username="",this.loginParams.password="",this.isCodeLogin=!this.isCodeLogin},getCode:function(){var t=this;""!=this.loginParams.username?this.$u.test.mobile(this.loginParams.username)?this.$refs.uCode.canGetCode?(n.showLoading({title:"正在获取验证码"}),this.$api.getCode(this.loginParams.username).then((function(e){console.log(e),n.hideLoading(),e.success?(t.$u.toast("验证码已发送"),t.$refs.uCode.start()):(t.$u.toast("请稍后重试"),t.$refs.uCode.end())}))):this.$u.toast("倒计时结束后再发送"):this.$u.toast("请输入正确的手机号"):this.$u.toast("请输入手机号码")},handleLogin:function(){var n=this;if(this.$u.test.mobile(this.loginParams.username))if(this.isCodeLogin){if(!this.$u.test.code(this.loginParams.password,6))return void this.$u.toast("验证码是6位数");var t={phone:this.loginParams.username,verifyCode:this.loginParams.password};this.logining=!0,this.$api.codeLogin(t).then((function(t){n.logining=!1,t.success?(n.logining=!1,n.$store.commit("LOGIN",t.data),n.$u.toast("登录成功"),setTimeout((function(){n.$store.dispatch("afterLogin")}),1500)):n.$u.toast(t.description)}))}else{if(""==this.loginParams.password)return void this.$u.toast("密码不能为空");this.$api.passwordLogin(this.loginParams).then((function(t){console.log(t),t.success?(n.logining=!1,n.$store.commit("LOGIN",t.data),n.$u.toast("登录成功"),setTimeout((function(){n.$store.dispatch("afterLogin")}),1500)):n.$u.toast(t.description)}))}else this.$u.toast("请输入正确的手机号")},forget:function(){this.$u.toast("点击了忘记密码")},toOauth:function(){},oauth:function(){var t=this;n.login({provider:"weixin",success:function(e){n.showLoading({title:"授权登录中"}),n.getUserInfo({provider:"weixin",success:function(n){t.userinfo.openId=n.userInfo.openId,t.userinfo.unionId=n.userInfo.unionId,t.userinfo.logo=n.userInfo.avatarUrl,t.userinfo.realname=n.userInfo.nickName,t.userinfo.type=0,t.$api.post("member/login/tp_login2.do",t.userinfo).then((function(n){console.log(n),n.success&&(t.showToast("微信授权成功"),t.LOGIN({userinfo:n.data}),setTimeout((function(){t.$store.dispatch("afterLogin")}),1500))}))}})},fail:function(n){console.error("授权登录失败："+JSON.stringify(n))}})}})};t.default=a}).call(this,e("543d")["default"])},f0bf:function(n,t,e){"use strict";(function(n){e("44a1");i(e("66fd"));var t=i(e("7f6e"));function i(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("543d")["createPage"])},f53e:function(n,t,e){"use strict";e.r(t);var i=e("dd07"),o=e.n(i);for(var u in i)"default"!==u&&function(n){e.d(t,n,(function(){return i[n]}))}(u);t["default"]=o.a}},[["f0bf","common/runtime","common/vendor"]]]);