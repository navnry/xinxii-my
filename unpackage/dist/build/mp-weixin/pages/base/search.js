(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/base/search"],{1014:function(t,e,n){"use strict";n.r(e);var o=n("255e"),s=n("d6d5");for(var i in s)"default"!==i&&function(t){n.d(e,t,(function(){return s[t]}))}(i);n("c1d6");var r,a=n("f0c5"),u=Object(a["a"])(s["default"],o["b"],o["c"],!1,null,"a6f534ce",null,!1,o["a"],r);e["default"]=u.exports},"255e":function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"33f0"))},uSearch:function(){return n.e("uview-ui/components/u-search/u-search").then(n.bind(null,"c6cd"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"47ce"))},uTag:function(){return n.e("uview-ui/components/u-tag/u-tag").then(n.bind(null,"8afd"))},bFriendItem:function(){return n.e("components/b-friend-item/b-friend-item").then(n.bind(null,"bc20"))},bArticleItem:function(){return n.e("components/b-article-item/b-article-item").then(n.bind(null,"4690"))},bProductItem:function(){return n.e("components/b-product-item/b-product-item").then(n.bind(null,"95c6"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"319c"))},uEmpty:function(){return n.e("uview-ui/components/u-empty/u-empty").then(n.bind(null,"eeeb"))}},s=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.showHot=!t.showHot})},i=[]},"4b78":function(t,e,n){},"7b54":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(n("a34a"));function s(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,o,s,i,r){try{var a=t[i](r),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(o,s)}function r(t){return function(){var e=this,n=arguments;return new Promise((function(o,s){var r=t.apply(e,n);function a(t){i(r,o,s,a,u,"next",t)}function u(t){i(r,o,s,a,u,"throw",t)}a(void 0)}))}}var a={data:function(){return{type:"product",isResult:!1,words:"",showHot:!0,closeable:!1,hotWords:[],historyWords:[],page:{pageNo:1,pageSize:6},list:[],totalCount:null,status:"loadmore",noData:!1}},watch:{words:{handler:function(t,e){return t=this.$u.trim(t,"all"),""==t&&(this.isResult=!1),t}}},onLoad:function(t){t&&(this.type=t.type,this.getHotWords(),this.getHistoryWords())},methods:{getSearchResult:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.type,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.words;this.isResult=!0,this.status="loading","friend"==e?(this.$set(this.page,"content",n),this.$api.friendList(this.page).then((function(e){if(t.noData=!0,e.success){if(e.page&&(t.totalCount=e.page.totalCount),1==t.page.pageNo){if(t.list=e.data.list,!e.page.hasNextPage)return void(t.status="nomore")}else if(t.list=t.list.concat(e.data.list),!e.page.hasNextPage)return void(t.status="nomore");t.status="loadmore"}}))):"article"==e?(this.$set(this.page,"name",n),this.$api.articleSearch(this.page).then((function(e){if(t.noData=!0,e.success){if(e.page&&(t.totalCount=e.page.totalCount),1==t.page.pageNo){if(t.list=e.data,!e.page.hasNextPage)return void(t.status="nomore")}else if(t.list=t.list.concat(e.data),!e.page.hasNextPage)return void(t.status="nomore");t.status="loadmore"}}))):(this.$set(this.page,"name",n),this.$api.productSearch(this.page).then((function(e){if(t.noData=!0,e.success){if(e.page&&(t.totalCount=e.page.totalCount),1==t.page.pageNo){if(t.list=e.data,!e.page.hasNextPage)return void(t.status="nomore")}else if(t.list=t.list.concat(e.data),!e.page.hasNextPage)return void(t.status="nomore");t.status="loadmore"}})))},loadMore:function(){this.page.pageNo+=1,"nomore"!=this.status&&this.getSearchResult()},onReachBottom:function(){this.loadMore()},handlerSearch:function(){this.words?(this.unshiftHistory(this.words),this.getSearchResult()):this.$showModal({title:"提示",content:"请输入搜索内容",showCancel:!1})},handlerClick:function(t){this.words=t,this.unshiftHistory(t),this.handlerSearch()},handlerInput:function(t){this.words=this.$u.trim(t,"all")},getHotWords:function(){var t=this;return r(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{n=t.$storage.get("hotWords"),n?t.hotWords=n:t.$api.hotSearchWords().then((function(e){console.log(e),e.success&&(t.hotWords=e.data,t.$storage.set("hotWords",e.data))}))}catch(o){console.log(o)}case 1:case"end":return e.stop()}}),e)})))()},getHistoryWords:function(){var t=this;return r(o.default.mark((function e(){var n;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{n=t.$storage.get("historyWords"),t.historyWords=n||[]}catch(o){console.log(o)}case 1:case"end":return e.stop()}}),e)})))()},unshiftHistory:function(t){var e=this;if(""!=t&&"product"===this.type){var n=!0;this.historyWords&&this.historyWords.forEach((function(o,s){o==t&&(n=!1,e.historyWords.splice(s,1),e.historyWords.unshift(o))})),n&&this.historyWords.unshift(t),this.$storage.set("historyWords",this.historyWords)}},clearAll:function(){var t=this;this.$showModal({title:"提示",content:"确认清空全部搜索历史吗？",success:function(e){e.confirm&&(t.$storage.remove("historyWords"),t.historyWords=[])}})},clearDone:function(){this.closeable=!1},tagClick:function(t){var e=this;this.historyWords.forEach((function(n,o){n==t&&(e.historyWords.splice(o,1),e.clearDone())})),this.$storage.set("historyWords",this.historyWords)},clearHistory:function(){this.closeable=!0}}};e.default=a},c1d6:function(t,e,n){"use strict";var o=n("4b78"),s=n.n(o);s.a},d6d5:function(t,e,n){"use strict";n.r(e);var o=n("7b54"),s=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=s.a},daef:function(t,e,n){"use strict";(function(t){n("44a1");o(n("66fd"));var e=o(n("1014"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["daef","common/runtime","common/vendor"]]]);