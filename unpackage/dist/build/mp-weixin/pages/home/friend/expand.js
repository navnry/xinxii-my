(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/friend/expand"],{"105c":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{enable:!0,tabList:[],tabCurrent:0,page:{typeId:"",pageNo:1,pageSize:6},list:[],status:"loadmore"}},onShow:function(){this.enable=!0},onHide:function(){this.enable=!1},onLoad:function(){this.getTypeList(),this.getList()},methods:{getTypeList:function(){var t=this,e=this.$storage.get("expandTabList");e?this.tabList=e:this.$http.get("/file/poster/type.do").then((function(e){e.success&&e.data&&(t.tabList=e.data.types,t.tabList.unshift({id:"",name:"全部"}),t.$storage.set("expandTabList",t.tabList))}))},getList:function(){var t=this;this.status="loading",this.$http.get("/file/poster/findPosterResourceByTypeId.do",{params:this.page}).then((function(e){if(e.success){var n=e.data.map((function(t){return{src:t}}));1==t.page.pageNo?(t.list=n,e.page.hasNextPage||(t.status="nomore")):(t.list=t.list.concat(n),e.page.hasNextPage||(t.status="nomore"));var a=t.list.map((function(e){return t.getImgInfo(e.src)}));Promise.all(a).then((function(e){var n,a,i=360;for(var s in t.list){var o=e[s],u=o.width/o.height;n=i*u,a=i,t.$set(t.list[s],"width",n),t.$set(t.list[s],"height",a)}})),console.log(t.list)}}))},changeTab:function(t){this.page.typeId=this.tabList[t].id,this.page.pageNo=1,this.tabCurrent=t,this.$refs.waterfall.refresh(),this.list=[],this.getList()},getImgInfo:function(e){return new Promise((function(n,a){t.getImageInfo({src:e,success:function(t){n({width:t.width,height:t.height})},fail:function(t){a(t)}})}))},loadMore:function(){this.page.pageNo+=1,"nomore"!=this.status&&this.getList()},onReachBottom:function(){this.loadMore()}}};e.default=n}).call(this,n("543d")["default"])},"57f5":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}));var a={uNavbar:function(){return n.e("uview-ui/components/u-navbar/u-navbar").then(n.bind(null,"33f0"))},uSticky:function(){return n.e("uview-ui/components/u-sticky/u-sticky").then(n.bind(null,"52fc"))},uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,"0abd"))},bWaterfall:function(){return n.e("components/b-waterfall/b-waterfall").then(n.bind(null,"8a90"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"319c"))}},i=function(){var t=this,e=t.$createElement;t._self._c},s=[]},"5a52":function(t,e,n){"use strict";n.r(e);var a=n("105c"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},aaab:function(t,e,n){"use strict";n.r(e);var a=n("57f5"),i=n("5a52");for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);var o,u=n("f0c5"),r=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);e["default"]=r.exports},ca22:function(t,e,n){"use strict";(function(t){n("44a1");a(n("66fd"));var e=a(n("aaab"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["ca22","common/runtime","common/vendor"]]]);